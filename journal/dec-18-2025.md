# LeRobot SO-101 Setup Notes
**Date:** December 18, 2024

---

## Hardware Setup

### What You Have
- 1x SO-101 arm (follower) — connected and calibrated
- 1x SO-101 arm (leader) — not with you today
- Waveshare controller board (USB-C port for data)
- USB-C to USB adapter/cable for data connection

### Connection Diagram
```
MacBook → USB-C Hub → USB-C cable → Waveshare Board (USB-C port)
                                  → DC Barrel Jack (needs 12V power supply)
                                  → 3-pin cable → Motors (daisy-chained)
```

### ⚠️ CRITICAL: Power Supply Needed
**You need a 12V 5A DC power adapter with barrel jack (5.5mm x 2.1mm)**
- USB power does NOT work — only provides 5V
- Motors require 12V to operate
- Search: "12V 5A DC power adapter barrel jack" (~$10-15 on Amazon)

### Waveshare Board Settings
- **Jumpers must be set to position "B"** for USB mode

---

## Software Setup

### Environment
```bash
conda activate lerobot
```

### LeRobot Installation
- Location: `/Users/charlesjavelona/projects/xlerobot/lerobot`
- Version: 0.4.3 (editable install)
- Extra installed: `placo` (for kinematics)

### URDF Files Downloaded
Downloaded SO-101 simulation files to:
```
/Users/charlesjavelona/projects/xlerobot/lerobot/SO101/
```

Commands used:
```bash
cd /Users/charlesjavelona/projects/xlerobot/lerobot
git clone --depth 1 --filter=blob:none --sparse https://github.com/TheRobotStudio/SO-ARM100.git temp_so100
cd temp_so100
git sparse-checkout set Simulation/SO101
cd ..
mv temp_so100/Simulation/SO101 ./SO101
rm -rf temp_so100
```

---

## Calibration Completed

### Follower Arm ✅
```bash
lerobot-calibrate \
    --robot.type=so101_follower \
    --robot.port=/dev/tty.usbmodem5AB01831571 \
    --robot.id=my_follower
```

**Calibration saved to:**
`/Users/charlesjavelona/.cache/huggingface/lerobot/calibration/robots/so101_follower/my_follower.json`

### Leader Arm ❌ (Not done yet)
When you have the leader arm, run:
```bash
lerobot-calibrate \
    --teleop.type=so101_leader \
    --teleop.port=/dev/tty.usbmodem______ \
    --teleop.id=my_leader
```

---

## Commands Reference

### Find USB Ports
```bash
ls /dev/tty.usb*
```
Current port: `/dev/tty.usbmodem5AB01831571`

### Teleoperation (Leader + Follower)
```bash
lerobot-teleoperate \
    --robot.type=so101_follower \
    --robot.port=/dev/tty.usbmodem5AB01831571 \
    --robot.id=my_follower \
    --teleop.type=so101_leader \
    --teleop.port=/dev/tty.usbmodem______ \
    --teleop.id=my_leader
```

### Keyboard Teleoperation (Single Arm)
```bash
lerobot-teleoperate \
    --robot.type=so101_follower \
    --robot.port=/dev/tty.usbmodem5AB01831571 \
    --robot.id=my_follower \
    --teleop.type=keyboard
```

### Phone Teleoperation
```bash
cd /Users/charlesjavelona/projects/xlerobot/lerobot
python examples/phone_to_so100/teleoperate.py
```
**Note:** Requires phone app setup (not completed)

---

## Errors Encountered & Solutions

| Error | Cause | Solution |
|-------|-------|----------|
| `No module named 'placo'` | Missing dependency | `pip install placo` |
| `URDF file does not exist` | Missing simulation files | Downloaded from SO-ARM100 GitHub repo |
| `Mesh .stl could not be found` | Need full SO101 folder | Clone entire Simulation/SO101 directory |
| `Input voltage error!` | Using USB for power | **Need 12V DC power adapter** |
| `Mobile I/O not found` | Phone app not configured | Setup phone app (TODO) |

---

## Next Steps

1. **Buy 12V 5A DC power adapter** with barrel jack
2. **Get leader arm** and calibrate it
3. **Test keyboard teleoperation** (once power supply connected)
4. **Setup phone app** for phone teleoperation (optional)

---

## Useful Links
- LeRobot Docs: https://huggingface.co/docs/lerobot/so101
- SO-ARM100 GitHub: https://github.com/TheRobotStudio/SO-ARM100
- Waveshare Wiki: https://www.waveshare.com/wiki/SO-ARM100/101